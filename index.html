<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音符当てゲーム</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
        }
        .game-container {
            width: 100%;
            max-width: 500px;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .note-card {
            background-color: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            min-height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 1rem;
        }
        .note-svg {
            height: 150px;
            max-height: 150px;
            width: auto;
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        .note-button {
            padding: 1rem;
            border-radius: 12px;
            font-weight: bold;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background: linear-gradient(145deg, #a5b4fc, #818cf8);
            color: white;
        }
        .note-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        .note-button.correct {
            background: linear-gradient(145deg, #86efac, #4ade80);
            box-shadow: 0 4px 6px rgba(34, 197, 94, 0.2);
        }
        .note-button.incorrect {
            background: linear-gradient(145deg, #fca5a5, #ef4444);
            box-shadow: 0 4px 6px rgba(239, 68, 68, 0.2);
        }
        .feedback {
            font-size: 1.25rem;
            font-weight: bold;
            min-height: 30px;
        }
        .start-button {
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: bold;
            background: #3b82f6;
            color: white;
            transition: all 0.2s;
            cursor: pointer;
            border: none;
        }
        .start-button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="text-4xl font-bold text-gray-800 mb-2">音符当てゲーム</h1>
        <p class="text-gray-600">表示された音符が何分音符か当てよう。</p>
        <div class="flex justify-between items-center text-xl font-bold text-gray-700">
            <span>スコア: <span id="score">0</span></span>
        </div>
        
        <div class="note-card">
            <div id="note-display" class="note-svg">
                <!-- 音符のSVGがここに表示されます -->
            </div>
        </div>

        <div id="game-controls" class="hidden">
            <div class="button-grid">
                <button class="note-button" data-note-value="whole">全音符</button>
                <button class="note-button" data-note-value="half">2分音符</button>
                <button class="note-button" data-note-value="quarter">4分音符</button>
                <button class="note-button" data-note-value="eighth">8分音符</button>
            </div>
            <div id="feedback" class="feedback text-center mt-4"></div>
        </div>
        
        <button id="start-button" class="start-button mt-4">ゲームスタート</button>
    </div>

    <script>
        // DOM要素の取得
        const startButton = document.getElementById('start-button');
        const gameControls = document.getElementById('game-controls');
        const noteDisplay = document.getElementById('note-display');
        const scoreDisplay = document.getElementById('score');
        const feedbackMessage = document.getElementById('feedback');
        const noteButtons = document.querySelectorAll('.note-button');

        // 音符のデータとSVGの定義
        const notes = [
            {
                name: "whole",
                label: "全音符",
                svg: `
                    <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                        <ellipse cx="50" cy="75" rx="35" ry="25" stroke="#333" stroke-width="2" fill="none"/>
                    </svg>
                `
            },
            {
                name: "half",
                label: "2分音符",
                svg: `
                    <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 75 A35 25 0 1 0 50 75" fill="none" stroke="#333" stroke-width="2"/>
                        <rect x="50" y="75" width="2" height="60" fill="#333"/>
                    </svg>
                `
            },
            {
                name: "quarter",
                label: "4分音符",
                svg: `
                    <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 75 A35 25 0 1 0 50 75" fill="#333"/>
                        <rect x="50" y="75" width="2" height="60" fill="#333"/>
                    </svg>
                `
            },
            {
                name: "eighth",
                label: "8分音符",
                svg: `
                    <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 75 A35 25 0 1 0 50 75" fill="#333"/>
                        <rect x="50" y="75" width="2" height="60" fill="#333"/>
                        <path d="M52 75 C60 70, 70 80, 80 85" stroke="#333" stroke-width="2" fill="none"/>
                        <path d="M52 75 C60 70, 70 80, 80 85" stroke="#333" stroke-width="2" fill="none"/>
                        <path d="M52 75 C70 80, 75 90, 80 100" stroke="#333" stroke-width="2" fill="none"/>
                        <path d="M52 75 C60 70, 70 80, 80 85" stroke="#333" stroke-width="2" fill="none"/>
                        <path d="M52 75 C70 80, 75 90, 80 100" stroke="#333" stroke-width="2" fill="none"/>
                        <path d="M50 135 C50 135, 75 125, 80 100 A15 15 0 0 1 70 80" stroke="#333" stroke-width="2" fill="none"/>
                        <path d="M50 135 C50 135, 75 125, 80 100" stroke="#333" stroke-width="2" fill="none"/>
                    </svg>
                `
            }
        ];

        let score = 0;
        let currentNote = null;

        // ゲームの初期化と開始
        function startGame() {
            score = 0;
            updateScore();
            startButton.classList.add('hidden');
            gameControls.classList.remove('hidden');
            feedbackMessage.textContent = "";
            displayRandomNote();
        }

        // ランダムな音符を表示
        function displayRandomNote() {
            // 前のボタンの色をリセット
            noteButtons.forEach(button => {
                button.classList.remove('correct', 'incorrect');
                button.disabled = false;
            });

            // 音符をランダムに選択
            const randomIndex = Math.floor(Math.random() * notes.length);
            currentNote = notes[randomIndex];
            noteDisplay.innerHTML = currentNote.svg;
        }

        // プレイヤーの回答をチェック
        function checkAnswer(event) {
            const selectedNote = event.target.dataset.noteValue;

            // すべてのボタンを無効化
            noteButtons.forEach(button => button.disabled = true);
            
            if (selectedNote === currentNote.name) {
                // 正解の場合
                score++;
                feedbackMessage.textContent = "正解です！";
                event.target.classList.add('correct');
            } else {
                // 不正解の場合
                const correctNoteLabel = notes.find(note => note.name === currentNote.name).label;
                feedbackMessage.textContent = `残念、不正解です。正解は「${correctNoteLabel}」でした。`;
                event.target.classList.add('incorrect');
            }

            updateScore();

            // 少し待ってから次の問題を表示
            setTimeout(displayRandomNote, 1500);
        }

        // スコア表示を更新
        function updateScore() {
            scoreDisplay.textContent = score;
        }

        // イベントリスナーの設定
        startButton.addEventListener('click', startGame);
        noteButtons.forEach(button => {
            button.addEventListener('click', checkAnswer);
        });

    </script>
</body>
</html>
